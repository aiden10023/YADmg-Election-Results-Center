<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Live Congressional & Governor Race Tracker</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
<style>
  /* Reset and base */
  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: #f4f6f8;
    margin: 0; 
    padding: 40px 20px;
    color: #222;
    max-width: 900px;
    margin-left: auto;
    margin-right: auto;
  }

  h1 {
    font-weight: 700;
    font-size: 2.25rem;
    color: #2c3e50;
    margin-bottom: 1rem;
    border-bottom: 3px solid #3498db;
    padding-bottom: 0.5rem;
  }

  .race {
    background: #fff;
    border-radius: 10px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.1);
    margin-bottom: 1.5rem;
    padding: 20px 25px;
    transition: box-shadow 0.3s ease;
  }

  .race:hover {
    box-shadow: 0 6px 15px rgba(0,0,0,0.15);
  }

  .district-name {
    font-size: 1.25rem;
    font-weight: 700;
    margin-bottom: 12px;
    color: #34495e;
  }

  .result-line {
    font-size: 1rem;
    margin-bottom: 6px;
  }

  .result-line span.candidate {
    font-weight: 600;
  }

  .bar-container {
    position: relative;
    height: 22px;
    border-radius: 12px;
    overflow: hidden;
    background-color: #ddd;
    margin: 12px 0 16px;
    display: flex;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
  }

  .bar-dem {
    background-color: #2e74c0;
    height: 100%;
    transition: width 0.6s ease;
    box-shadow: inset 0 -1px 4px rgba(255,255,255,0.3);
  }
  
  .bar-rep {
    background-color: #c0392b;
    height: 100%;
    transition: width 0.6s ease;
    box-shadow: inset 0 -1px 4px rgba(255,255,255,0.3);
  }

  .reporting {
    font-style: italic;
    font-size: 0.9rem;
    color: #777;
  }

  /* Responsive */
  @media (max-width: 600px) {
    body {
      padding: 30px 10px;
    }
    h1 {
      font-size: 1.75rem;
    }
    .district-name {
      font-size: 1.1rem;
    }
    .bar-container {
      height: 18px;
    }
  }
</style>
</head>
<body>
    
<header style="text-align: center; margin-bottom: 30px;">
  <h1 style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-weight: 700; font-size: 2.5rem; color: #2c3e50;">
   YADmg Election Results Center
  </h1>
  <p style="font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 1.1rem; color: #555; max-width: 600px; margin: 0 auto;">
    Delivering real-time, modernized election reporting with accurate, up-to-date results for congressional and gubernatorial races.
  </p>
</header>


<h1>Live Congressional Race Tracker</h1>
<div id="house-races"></div>

<h1>Live Governor Race Tracker</h1>
<div id="governor-races"></div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyAYoDh4u7v-ZBkKEe-L232257MCY6-HzZI",
    authDomain: "ap22-95778.firebaseapp.com",
    databaseURL: "https://ap22-95778-default-rtdb.firebaseio.com",
    projectId: "ap22-95778",
    storageBucket: "ap22-95778.appspot.com",
    messagingSenderId: "151082070141",
    appId: "1:151082070141:web:441ce024092d6b3327c114"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  function loadRaceData(refPath, containerId) {
    const container = document.getElementById(containerId);
    db.ref(refPath).on('value', (snapshot) => {
      const data = snapshot.val();
      if (!data) {
        container.innerHTML = '<p class="reporting">No data available.</p>';
        return;
      }

      container.innerHTML = '';

      for (const key in data) {
        const race = data[key];
        const demVotes = race.democrat?.votes || 0;
        const repVotes = race.republican?.votes || 0;
        const totalVotes = demVotes + repVotes;
        const percentDem = totalVotes ? ((demVotes / totalVotes) * 100).toFixed(1) : '0.0';
        const percentRep = totalVotes ? ((repVotes / totalVotes) * 100).toFixed(1) : '0.0';
        const reporting = race.reporting ? `${race.reporting}% reporting` : 'Results delayed â€” awaiting more votes...';

        let html = `<div class="race">
                      <div class="district-name">${key}</div>`;

        if (totalVotes === 0) {
          html += `<div class="result-line reporting">${reporting}</div>`;
        } else {
          html += `
            <div class="result-line"><span class="candidate">Democrat (${race.democrat?.name || 'N/A'}):</span> ${demVotes} (${percentDem}%)</div>
            <div class="result-line"><span class="candidate">Republican (${race.republican?.name || 'N/A'}):</span> ${repVotes} (${percentRep}%)</div>
            <div class="bar-container">
              <div class="bar-dem" style="width: ${percentDem}%"></div>
              <div class="bar-rep" style="width: ${percentRep}%"></div>
            </div>
            <div class="result-line reporting">${reporting}</div>`;
        }

        html += '</div>';
        container.innerHTML += html;
      }
    });
  }

  loadRaceData('house', 'house-races');
  loadRaceData('governors', 'governor-races');
</script>

</body>
</html>
